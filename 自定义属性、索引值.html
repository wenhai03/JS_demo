<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自定义属性、索引值</title>
    <style>
        *{ margin:0; padding:0; list-style:none; font-family:"微软雅黑";}
        #ul{ width:300px; margin:50px auto 0; border-left:1px solid #ccc; border-right:1px solid #dadada;}
        #ul h2{ width:270px; height:35px; line-height:35px; padding-left:30px; background: #74a400; color:#fff; font-size:16px; font-weight:100; cursor:pointer;}
        #ul li{ margin-bottom:1px;}
        #ul li ul li{ width:270px; padding-left:30px; height:30px; line-height:30px; border-bottom:1px solid #ccc; cursor:pointer;}
        #ul li ul .hover{ background:#EFF4E0;}
        #ul .active{ background:green;}
        #ul .active1{ background:pink;}
        #ul .active2{ background:orangered;}
        #ul li ul{ display:none;}
        #ul li ul.hover{ display:block;}
        #ul .hide{display: none;}
        #ul .show{display: block;}


    </style>
</head>
<body>
<ul id="ul">
    <li>
        <h2>我的好友</h2>
        <ul>
            <li>王一一</li>
            <li>李文化</li>
            <li>高发展</li>
        </ul>
    </li>
    <li>
        <h2>我的同事</h2>
        <ul>
            <li>黄腾达</li>
            <li>刘和谐</li>
            <li>邢如意</li>
            <li>沈从文</li>
            <li>张曼玉</li>
        </ul>
    </li>
    <li>
        <h2>我的同学</h2>
        <ul>
            <li>郭文明</li>
            <li>尹调整</li>
            <li>郑安全</li>
        </ul>
    </li>
</ul>
<script>
window.onload = function () {

    var oUl = document.getElementById('ul');
    var aH2 = oUl.getElementsByTagName('h2');
    var aUl = oUl.getElementsByTagName('ul');
    var arr = [];
    var iNow = -1;
    for(var i=0;i<aUl.length;i++){
        var aLi = aUl[i].getElementsByTagName('li');
        for(var j=0;j<aLi.length;j++){
            arr.push(aLi[j]);
        }
    };

    for(var i=0;i<arr.length;i++){
        arr[i].onOff = true;
        arr[i].onmouseover = function () {
            if(this.onOff){
                this.className = 'active';
            }
        };

        arr[i].onmouseout = function () {
            if(this.onOff){
                this.className = '';
            }/*else {
                this.className = 'active1'
            }*/
        };

        arr[i].onclick =function () {
            for(var i=0;i<arr.length;i++){
                if(this != arr[i]){
                    arr[i].className = '';
                    arr[i].onOff = true;
                }
            };
            if ( this.onOff ) {
                this.className = 'active1';
                this.onOff = false;
            } else {
                this.className = '';
                this.onOff = true;
            }

        }
    };


    for(var i=0;i<aH2.length;i++){
        aH2[i].index = i;
        aH2[i].onclick = function () {
            /*for(var i=0;i<aH2.length;i++){
                //aUl[i].className = 'hide';
                aH2[i].className = '';
            };*/
            if(this.className == ''){
                aH2[this.index].className = 'active';
                aUl[this.index].className = 'show';
            }else {
                aH2[this.index].className = '';
                aUl[this.index].className = 'hide';
            };

        }
    }

}
</script>
</body>
</html>